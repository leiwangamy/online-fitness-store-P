{% extends "base.html" %}
{% block title %}Edit Address{% endblock %}

{% block extra_css %}
<style>
  input:invalid, select:invalid {
    border-color: #ffc107;
  }
</style>
{% endblock %}

{% block content %}
  <h1>Edit Address</h1>

  <form method="post" id="address-form">
    {% csrf_token %}
    
    {# Show first_name and last_name first, then other fields #}
    <p>
      <label for="{{ form.first_name.id_for_label }}">{{ form.first_name.label }}: <span style="color: red;">*</span></label>
      {{ form.first_name }}
      {% if form.first_name.errors %}<span style="color: red;">{{ form.first_name.errors }}</span>{% endif %}
    </p>
    <p>
      <label for="{{ form.last_name.id_for_label }}">{{ form.last_name.label }}: <span style="color: red;">*</span></label>
      {{ form.last_name }}
      {% if form.last_name.errors %}<span style="color: red;">{{ form.last_name.errors }}</span>{% endif %}
    </p>
    
    {# Show remaining fields #}
    {% for field in form %}
      {% if field.name != 'first_name' and field.name != 'last_name' %}
        <p>
          <label for="{{ field.id_for_label }}">{{ field.label }}:
            {% if field.name in 'city,province,postal_code' %}<span style="color: red;">*</span>{% endif %}
          </label>
          {{ field }}
          {% if field.errors %}<span style="color: red;">{{ field.errors }}</span>{% endif %}
        </p>
      {% endif %}
    {% endfor %}

    {% if next %}
      <input type="hidden" name="next" value="{{ next }}">
    {% else %}
      <input type="hidden" name="next" value="{% url 'profiles:account_profile' %}">
    {% endif %}

    <button type="submit">Save</button>
    <a href="{{ next|default:request.path }}">Cancel</a>
  </form>

{% endblock %}

